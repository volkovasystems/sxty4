{"version":3,"sources":["sxty4.js"],"names":[],"mappings":"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","file":"sxty4.support.js","sourcesContent":["\"use strict\";\n\n/*;\n\t@module-license:\n\t\tThe MIT License (MIT)\n\t\t@mit-license\n\n\t\tCopyright (@c) 2017 Richeve Siodina Bebedor\n\t\t@email: richeve.bebedor@gmail.com\n\n\t\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\t\tof this software and associated documentation files (the \"Software\"), to deal\n\t\tin the Software without restriction, including without limitation the rights\n\t\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t\tcopies of the Software, and to permit persons to whom the Software is\n\t\tfurnished to do so, subject to the following conditions:\n\n\t\tThe above copyright notice and this permission notice shall be included in all\n\t\tcopies or substantial portions of the Software.\n\n\t\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\t\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n\t\tSOFTWARE.\n\t@end-module-license\n\n\t@module-configuration:\n\t\t{\n\t\t\t\"package\": \"sxty4\",\n\t\t\t\"path\": \"sxty4/sxty4.js\",\n\t\t\t\"file\": \"sxty4.js\",\n\t\t\t\"module\": \"sxty4\",\n\t\t\t\"author\": \"Richeve S. Bebedor\",\n\t\t\t\"contributors\": [\n\t\t\t\t\"John Lenon Maghanoy <johnlenonmaghanoy@gmail.com>\"\n\t\t\t],\n\t\t\t\"eMail\": \"richeve.bebedor@gmail.com\",\n\t\t\t\"repository\": \"https://github.com/volkovasystems/sxty4.git\",\n\t\t\t\"test\": \"sxty4-test.js\",\n\t\t\t\"global\": true\n\t\t}\n\t@end-module-configuration\n\n\t@module-documentation:\n\t\tBase 64 string encoding and decoding with url safety.\n\t@end-module-documentation\n\n\t@include:\n\t\t{\n\t\t\t\"asea\": \"asea\",\n\t\t\t\"falzy\": \"falzy\",\n\t\t\t\"harden\": \"harden\",\n\t\t\t\"protype\": \"protype\"\n\t\t}\n\t@end-include\n*/\n\nconst asea = require( \"asea\" );\nconst falzy = require( \"falzy\" );\nconst harden = require( \"harden\" );\nconst protype = require( \"protype\" );\n\nconst DECODED = \"decoded\";\nconst ENCODED = \"encoded\";\nconst RESULT = Symbol( \"result\" );\nconst TYPE = Symbol( \"type\" );\nconst DATA = Symbol( \"data\" );\n\nconst sxty4 = function sxty4( data ){\n\t/*;\n\t\t@meta-configuration:\n\t\t\t{\n\t\t\t\t\"data:required\": \"string\"\n\t\t\t}\n\t\t@end-meta-configuration\n\t*/\n\n\tif( falzy( data ) || !protype( data, STRING ) ){\n\t\tthrow new Error( \"invalid data\" );\n\t}\n\n\t/*;\n\t\t@note:\n\t\t\tThis is intentionally var, do not change.\n\t\t@end-note\n\t*/\n\tvar cache = { [ DATA ]: data }\n\n\tlet wrapper = { };\n\n\tlet update = function update( data ){\n\t\t/*;\n\t\t\t@meta-configuration:\n\t\t\t\t{\n\t\t\t\t\t\"data:required\": \"string\"\n\t\t\t\t}\n\t\t\t@end-meta-configuration\n\t\t*/\n\n\t\tif( falzy( cache ) ){\n\t\t\tthrow new Error( \"data has been flushed\" );\n\t\t}\n\n\t\tif( falzy( data ) || !protype( data, STRING ) ){\n\t\t\tthrow new Error( \"invalid data\" );\n\t\t}\n\n\t\tcache[ DATA ] = data;\n\n\t\treturn wrapper;\n\t};\n\n\tlet encode = function encode( ){\n\t\tif( falzy( cache ) ){\n\t\t\tthrow new Error( \"data has been flushed\" );\n\t\t}\n\n\t\tif( cache[ TYPE ] === ENCODED ){\n\t\t\tthrow new Error( \"data has been encoded\" );\n\t\t}\n\n\t\tcache[ TYPE ] = ENCODED;\n\t\tlet value = cache[ RESULT ] || cache[ DATA ];\n\n\t\tif( falzy( value ) ){\n\t\t\tthrow new Error( \"empty value to be encoded\" );\n\t\t}\n\n\t\tif( asea.client ){\n\t\t\tcache[ RESULT ] = encodeURIComponent( btoa( encodeURIComponent( value )\n\t\t\t\t.replace( /%([0-9A-F]{2})/g, ( match, token ) => {\n\t\t\t\t\treturn String.fromCharCode( `0x${ token }` );\n\t\t\t\t} ) ) );\n\n\t\t}else if( asea.server ){\n\t\t\tcache[ RESULT ] = encodeURIComponent( new Buffer( value ).toString( \"base64\" ) );\n\n\t\t}else{\n\t\t\tthrow new Error( \"cannot determine platform\" );\n\t\t}\n\n\t\treturn cache[ RESULT ];\n\t};\n\n\tlet decode = function decode( ){\n\t\tif( falzy( cache ) ){\n\t\t\tthrow new Error( \"data has been flushed\" );\n\t\t}\n\n\t\tif( cache[ TYPE ] === DECODED ){\n\t\t\tthrow new Error( \"data has been decoded\" );\n\t\t}\n\n\t\tcache[ TYPE ] = DECODED;\n\t\tlet value = cache[ RESULT ] || cache[ DATA ];\n\n\t\tif( falzy( value ) ){\n\t\t\tthrow new Error( \"empty value to be decoded\" );\n\t\t}\n\n\t\tif( asea.client ){\n\t\t\tcache[ RESULT ] = decodeURIComponent( atob( decodeURIComponent( data ) )\n\t\t\t\t.split( \"\" ).map( ( character ) => {\n\t\t\t\t\tcharacter = `00${ character.charCodeAt( 0 ).toString( 16 ) }`.slice( -2 );\n\n\t\t\t\t\treturn `%${ character }`;\n\t\t\t\t} ).join( \"\" ) );\n\n\t\t}else if( asea.server ){\n\t\t\tcache[ RESULT ] = new Buffer( decodeURIComponent( data ), \"base64\" ).toString( \"utf8\" );\n\n\t\t}else{\n\t\t\tthrow new Error( \"cannot determine platform\" );\n\t\t}\n\n\t\treturn cache[ RESULT ];\n\t};\n\n\tlet clear = function clear( ){\n\t\tif( falzy( cache ) ){\n\t\t\tthrow new Error( \"data has been flushed\" );\n\t\t}\n\n\t\tcache[ TYPE ] = null;\n\t\tcache[ RESULT ] = \"\";\n\n\t\treturn wrapper;\n\t};\n\n\tlet flush = function flush( ){\n\t\tif( falzy( cache ) ){\n\t\t\tthrow new Error( \"data has been flushed\" );\n\t\t}\n\n\t\twrapper.clear( );\n\n\t\tcache[ DATA ] = \"\";\n\t\tcache = null;\n\n\t\treturn wrapper;\n\t};\n\n\tharden( \"encode\", encode, wrapper );\n\tharden( \"decode\", decode, wrapper );\n\tharden( \"update\", update, wrapper );\n\tharden( \"clear\", clear, wrapper );\n\tharden( \"flush\", flush, wrapper );\n\n\treturn Object.freeze( wrapper );\n};\n\nmodule.exports = sxty4;\n"]}